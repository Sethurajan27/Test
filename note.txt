from selenium import webdriver
from selenium.webdriver.chrome.options import Options
import tempfile
import os

def init_driver(headless=True):
    options = Options()

    # âœ… Always enable headless mode for CI (GitHub Actions)
    options.add_argument("--headless=new")
    options.add_argument("--disable-gpu")
    options.add_argument("--no-sandbox")
    options.add_argument("--disable-dev-shm-usage")

    # âœ… Use a unique temporary user data directory
    user_data_dir = tempfile.mkdtemp()
    options.add_argument(f"--user-data-dir={user_data_dir}")

    # âœ… Avoid using extensions and background network calls
    options.add_argument("--disable-extensions")
    options.add_argument("--disable-background-networking")
    options.add_argument("--disable-default-apps")
    options.add_argument("--disable-sync")
    options.add_argument("--metrics-recording-only")
    options.add_argument("--disable-notifications")

    driver = webdriver.Chrome(options=options)
    return driver






from src.openai_signup import init_driver

def main():
    driver = init_driver()  # No need for headless=False
    ...


git add src/openai_signup.py main.py
git commit -m "ðŸš‘ Fix Chrome profile reuse issue in CI"
git push origin main
